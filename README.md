# Информационно-справочная система кинотеатра

Веб-приложение для управления кинотеатром, разработанное на Java с использованием Spring Boot.

## Технологии

- **Java 17**
- **Spring Boot 3.2.0**
- **Spring Data JPA**
- **Hibernate**
- **MySQL**
- **Thymeleaf**
- **Spring Security**
- **Maven**
- **Bootstrap 5**

## Функциональность

### 1. Регистрация и авторизация
- Регистрация новых пользователей
- Авторизация с проверкой прав доступа
- Разделение ролей пользователей

### 2. Роли пользователей

#### Зритель (VIEWER)
- Просмотр фильмов, сеансов и залов
- Покупка билетов
- Просмотр своих билетов
- Отмена билетов

#### Кассир (CASHIER)
- Все функции зрителя
- Управление фильмами (добавление, редактирование, удаление)
- Управление сеансами
- Управление залами
- Просмотр всех билетов

#### Администратор (ADMIN)
- Все функции кассира
- Управление пользователями
- Изменение ролей пользователей
- Просмотр статистики

### 3. Управление данными
- **Фильмы**: CRUD операции, поиск, сортировка
- **Залы**: CRUD операции, поиск, сортировка
- **Сеансы**: CRUD операции, поиск, сортировка
- **Билеты**: покупка, просмотр, отмена

### 4. Поиск и сортировка
- Поиск по всем записям
- Сортировка по различным критериям

### 5. Статистика
- Общее количество пользователей
- Распределение пользователей по ролям
- Количество билетов
- Среднее время ожидания

### 6. Обработка ошибок
- Информативные сообщения об ошибках
- Страница 404
- Валидация данных

## Установка и запуск

### Требования
- Java 17 или выше
- Maven 3.6+
- MySQL 8.0+

### Настройка базы данных

1. Создайте базу данных MySQL:
```sql
CREATE DATABASE cinema_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. Настройте подключение в `src/main/resources/application.properties`:
```properties
spring.datasource.url=jdbc:mysql://localhost:3306/cinema_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=ваш_пароль
```

### Запуск приложения

1. Клонируйте репозиторий или распакуйте проект

2. Установите зависимости:
```bash
mvn clean install
```

3. Запустите приложение:
```bash
mvn spring-boot:run
```

4. Откройте браузер и перейдите по адресу:
```
http://localhost:8080
```

### Первый запуск

При первом запуске приложение автоматически создаст таблицы в базе данных. 
Для тестирования рекомендуется создать администратора вручную через SQL:

```sql
INSERT INTO users (username, password, email, full_name, role, created_at) 
VALUES ('admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iwK8pQ0O', 
        'admin@cinema.ru', 'Администратор', 'ADMIN', NOW());
```

Пароль по умолчанию: `admin123` (зашифрован с помощью BCrypt)

## Структура проекта

```
src/
├── main/
│   ├── java/ru/cinema/
│   │   ├── config/          # Конфигурация (Security, etc.)
│   │   ├── controller/      # Контроллеры
│   │   ├── model/           # Модели данных (Entity)
│   │   ├── repository/      # Репозитории (JPA)
│   │   ├── service/         # Сервисы (бизнес-логика)
│   │   └── CinemaApplication.java
│   └── resources/
│       ├── templates/       # HTML шаблоны (Thymeleaf)
│       └── application.properties
└── pom.xml
```

## Использование

1. **Регистрация**: Перейдите на `/register` и создайте аккаунт
2. **Вход**: Войдите в систему через `/login`
3. **Работа с данными**: Используйте меню для навигации по разделам
4. **Статистика**: Доступна в разделе "Статистика" (требуется авторизация)
5. **Об авторе**: Информация доступна в меню

## Настройка страницы "Об авторе"

Откройте файл `src/main/resources/templates/about.html` и заполните:
- ФИО
- Группу и учебное заведение
- Контактные данные
- Даты начала и завершения работы

## Особенности реализации

- Использование Spring Security для аутентификации и авторизации
- Валидация данных на уровне модели и контроллера
- Обработка исключений с информативными сообщениями
- Адаптивный дизайн с использованием Bootstrap
- RESTful архитектура контроллеров
- Транзакционность операций с БД

## Лицензия

Проект создан в учебных целях.

